---
import { 
  Terminal, CreditCard, LayoutGrid, ExternalLink
} from "@lucide/astro";

// Obtenemos la ruta actual desde el servidor
const pathname = Astro.url.pathname;

// Función simple para verificar si un link está activo
const isActive = (href: string) => {
  // Caso especial para Inicio
  if (href === '/') return pathname === '/';
  // Ignoramos anclas y enlaces externos
  if (href.startsWith('http') || href.startsWith('#')) return false;
  
  // Normalización para evitar errores con trailing slashes
  const currentPath = pathname.endsWith('/') && pathname.length > 1 ? pathname.slice(0, -1) : pathname;
  const targetPath = href.endsWith('/') && href.length > 1 ? href.slice(0, -1) : href;

  return currentPath === targetPath || currentPath.startsWith(targetPath + '/');
};

// Verificaciones específicas para los enlaces principales
const isHomeActive = isActive('/');
const isAboutActive = isActive('/about');
const isSupportActive = isActive('/help');
---

<div class="fixed top-0 left-0 w-full z-50 px-4 py-4 pointer-events-none">
  <nav
    id="navbar"
    class="max-w-7xl mx-auto pointer-events-auto bg-background/60 backdrop-blur-sm border border-border-subtle rounded-full px-7 shadow-lg"
  >
    <div class="flex items-center justify-between h-14.5">
      
      <div class="flex items-center gap-10">
        <a href="/" class="flex items-center gap-2 group shrink-0">
          <Terminal class="h-5 w-5 text-brand-cyan" />
          <span class="font-black text-[16px] tracking-tighter text-white uppercase">
            Arkania<span class="text-brand-cyan font-black">Host</span>
          </span>
        </a>

        <div class="hidden lg:flex items-center gap-8 text-[14px] font-bold">
          
          <a 
            href="/" 
            class={`transition-colors ${isHomeActive ? 'text-brand-magenta' : 'text-slate-200 hover:text-brand-magenta'}`}
          >
            Inicio
          </a>

          <a 
            href="/about" 
            class={`transition-colors ${isAboutActive ? 'text-brand-magenta' : 'text-slate-200 hover:text-brand-magenta'}`}
          >
            Nosotros
          </a>
          
          <a 
            href="/help" 
            class={`transition-colors ${isSupportActive ? 'text-brand-magenta' : 'text-slate-200 hover:text-brand-magenta'}`}
          >
            Soporte
          </a>

        </div>
      </div>

      <div class="flex items-center gap-6">
        <div class="hidden md:flex items-center gap-6 border-r border-border-subtle pr-6">
          <a href="https://billing.arkaniahost.xyz" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-[13px] font-bold text-slate-400 hover:text-brand-magenta transition-colors group">
            <CreditCard size={16} class="opacity-40 group-hover:opacity-100 transition-opacity" /> Clientes
          </a>
          <a href="https://panel.arkaniahost.xyz" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-[13px] font-bold text-slate-400 hover:text-brand-magenta transition-colors group">
            <LayoutGrid size={16} class="opacity-40 group-hover:opacity-100 transition-opacity" /> Panel
          </a>
        </div>

        <a
        href="#pricing"
        class="btn-primary h-9 text-[13px] px-5 shadow-lg shadow-brand-cyan/10"
        >
          Crear servidor <ExternalLink size={14} />
        </a>
      </div>
    </div>
  </nav>
</div>